version: "3.1"

actions:
  - check_transfer_funds
  - execute_transfer
  - add_new_recipient
  - send_money
  - validate_recipient_name

slots:
  transfer_confirmation:
    type: bool
    mappings:
      - type: custom
  is_existing_recipient:
    type: bool
    mappings:
      - type: custom
  recipient_name:
    type: text
    mappings:
      - type: custom
  recipient_iban:
    type: text
    mappings:
      - type: custom
  recipient_phone_number:
    type: text
    mappings:
      - type: custom
  amount_of_money:
    type: text
    mappings:
      - type: custom

  transfer_money_transfer_successful:
    type: bool
    mappings:
      - type: custom
  transfer_money_has_sufficient_funds:
    type: bool
    mappings:
      - type: custom
  transfer_money_recipient:
    type: text
    mappings:
      - type: custom
  transfer_money_amount_of_money:
    type: text
    mappings:
      - type: custom
  transfer_money_final_confirmation:
    type: text
    mappings:
      - type: custom

responses:
  utter_ask_recipient_name:
  - text: What's the name of the beneficiary?
  utter_ask_recipient_iban:
    - text: What's the iban of the beneficiary?
  utter_ask_recipient_phone_number:
    - text: What's the phone number of the beneficiary?
  utter_ask_confirm_new_recipient:
    - text: Alright, do you confirm that you want to add the new beneficiary?
  utter_ask_transfer_confirmation:
    - text: Please confirm if you would like to transfer {amount_of_money} USD to {recipient_name} with IBAN {recipient_iban}?
  # utter_need_new_recipient:
  #   - text: Looks like {recipient_details} is not part of your list of added beneficiaries. Let's add them.
  utter_ask_amount_of_money:
    - text: How much do you want to transfer?
  utter_transfer_money_insufficient_funds:
    - text: You don't have so much money on your account!
  utter_transfer_failed:
    - text: something went wrong transferring the money.
  utter_out_of_scope:
    - text: Sorry, I'm not sure how to respond to that. Type "help" for assistance.
  utter_ask_transfer_money_amount_of_money:
    - text: How much money do you want to transfer?
  utter_ask_transfer_money_recipient:
    - text: Who do you want to transfer money to?
  utter_transfer_complete:
    - text: Successfully transferred {transfer_money_amount_of_money} to {transfer_money_recipient}.
  utter_transfer_cancelled:
    - text: Transfer cancelled.
  utter_ask_transfer_money_final_confirmation:
    - buttons:
        - payload: yes
          title: Yes
        - payload: no
          title: No, cancel the transaction
      text: Would you like to transfer {transfer_money_amount_of_money} to {transfer_money_recipient}?
