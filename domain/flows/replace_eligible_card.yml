version: "3.1"

slots:
  days_since_card_sent:
    type: text
  lock_card:
    type: bool
  whos_card:
    type: text

responses:
  utter_card_recently_sent:
    - text: It seems your new card was sent {days_since_card_sent} days ago. It should arrive soon!
  utter_ask_lock_card:
    - text: Do you want to lock this card before I connect you with an agent to replace it?
      channel: twilio_media_streams
    - text: Do you want to lock this card before I connect you with an agent to replace it?
      buttons:
        - payload: yes
          title: "Yes"
        - payload: no
          title: "No"
  utter_sorry_damaged:
    - text: Sorry to hear your card is damaged, but I can help you replace it!
  utter_card_locked:
    - text: Ok, your {current_card_name} is now locked
  utter_connect_to_specialist:
    - text: Let me get a specialist who can help with this.
  utter_ask_whos_card:
    - text: Your account has more than one card under it. Which one do you want to replace?
      channel: twilio_media_streams
    - text: Your account has more than one card under it. Which one do you want to replace?
      buttons:
        - payload: mine
          title: "My card"
        - payload: other
          title: "Maria's card"
        - payload: both
          title: "Both cards"
  utter_start_damage_replacement:
    - text: Okay, I've started the replacement process for you and your current cards will remain active 
  utter_replacement_sent_to_authorized_user:
    - text: The other users you've authorized will get replacement cards, too.

actions:
  - action_days_since_card_sent
